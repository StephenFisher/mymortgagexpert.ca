<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mortgage Renewal Guide — MyMortgageExpert</title>
  <meta name="description" content="Your complete Canadian mortgage renewal guide. Learn when to start, how to negotiate, and whether to switch lenders for a better rate.">
  <link rel="stylesheet" href="../styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Manrope:wght@800&family=Playfair+Display:ital,wght@1,600;1,700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- ======= NAV BAR ======= -->
  <header class="navbar" id="navbar">
    <div class="container navbar__inner">
      <a href="/" class="navbar__logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="7" fill="#1B3C2D"/>
          <path d="M7 23V13l9-5.5 9 5.5v10H7z" fill="#2A7D5B"/>
          <rect x="12.5" y="16.5" width="7" height="6.5" rx="1" fill="#F7F3EE"/>
        </svg>
        <span>MyMortgageExpert</span>
      </a>
      <nav class="navbar__links" id="navLinks">
        <div class="navbar__dropdown">
          <button class="navbar__dropdown-toggle">Calculators <svg width="10" height="6" viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
          <div class="navbar__dropdown-menu">
            <a href="/calculators/heloc.html">HELOC Calculator</a>
            <a href="/calculators/refinance.html">Refinance Calculator</a>
            <a href="/calculators/renewal.html">Renewal Calculator</a>
            <a href="/calculators/home-equity-loan.html">Home Equity Loan Calculator</a>
            <a href="/calculators/self-employed.html">Self-Employed Calculator</a>
            <a href="/calculators/land-transfer-tax.html">Land Transfer Tax Calculator</a>
            <a href="/calculators/purchase.html">Purchase Calculator</a>
            <a href="/calculators/affordability.html">Affordability Calculator</a>
          </div>
        </div>
        <a href="/mortgages.html">Mortgages</a>
        <a href="/how-it-works.html">How It Works</a>
        <a href="/about.html">About Us</a>
        <a href="#" class="btn btn--primary navbar__mobile-cta open-modal">Get Pre-Approved</a>
      </nav>
      <div class="navbar__right">
        <a href="#" class="btn btn--primary navbar__cta open-modal">Get Pre-Approved</a>
      </div>
      <button class="navbar__hamburger" id="hamburger" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>

  <!-- ======= ARTICLE ======= -->
  <article class="article">
    <div class="container article__container">
      <div class="article__nav">
        <a href="refinancing-your-mortgage.html" class="article__back">&larr; Refinancing Guide</a>
        <a href="first-time-home-buyer.html" class="article__next">First-Time Buyer Guide &rarr;</a>
      </div>
      <div class="article__header">
        <span class="article__tag">MORTGAGE GUIDE</span>
        <h1 class="article__title">Mortgage Renewal in Canada &mdash; What Every Homeowner Needs to Know</h1>
        <div class="article__meta">
          <span>Updated February 2026</span>
          <span>&middot;</span>
          <span>9 min read</span>
        </div>
      </div>

      <div class="article__body">
        <p>If you have a mortgage in Canada, renewal is inevitable. Unless you pay off your mortgage in a single term, you'll need to renew every 1 to 5 years. And yet, a surprising number of Canadians simply sign the renewal letter their bank sends them &mdash; without shopping around, without negotiating, and without realizing they could be saving thousands. This guide explains everything you need to know about the mortgage renewal process and how to make it work in your favour.</p>

        <h2>What Is a Mortgage Renewal?</h2>
        <p>When you take out a mortgage, you agree to a specific term &mdash; the length of time your interest rate and conditions are locked in. The most common term in Canada is 5 years, though terms range from 1 to 10 years.</p>
        <p>At the end of your term, if you still have a balance owing (which most people do), you need to renew your mortgage. Renewal is essentially renegotiating the terms of your mortgage for the next period. You choose a new term, a new rate (fixed or variable), and potentially a new lender.</p>

        <h2>The Renewal Letter: Don't Just Sign It</h2>
        <p>About 30 to 120 days before your term expires, your current lender will mail you a renewal offer. It will include a new interest rate and a form to sign. Many homeowners sign this letter and send it back without a second thought.</p>
        <p>This is a mistake. The rate on your renewal letter is almost never the best rate available. It's your lender's posted rate &mdash; their starting point for negotiation, not their best offer. Studies show that Canadians who shop around at renewal save an average of 0.25% to 0.75% on their rate. On a $500,000 mortgage, that's $1,250 to $3,750 per year.</p>

        <h2>When to Start Preparing for Renewal</h2>
        <p>Don't wait for the renewal letter. Start preparing 120 days (4 months) before your term expires:</p>
        <ul>
          <li><strong>120 days out:</strong> Start shopping for rates. Many lenders will offer rate holds that lock in a rate for 90 to 120 days at no cost.</li>
          <li><strong>90 days out:</strong> Get pre-approved with alternative lenders. A mortgage broker can submit your application to multiple lenders simultaneously.</li>
          <li><strong>60 days out:</strong> Compare your best offers against your current lender's renewal rate. Call your lender and negotiate using the competing offers as leverage.</li>
          <li><strong>30 days out:</strong> Finalize your decision. If switching lenders, your lawyer and new lender will handle the transfer.</li>
        </ul>

        <h2>Should You Stay or Switch Lenders?</h2>
        <p>At renewal, you have two options: renew with your current lender or switch to a new one. Here's what to consider:</p>
        <p><strong>Staying with your current lender:</strong></p>
        <ul>
          <li>Simpler process &mdash; just sign the renewal form</li>
          <li>No legal fees or appraisal required</li>
          <li>No new application or credit check (in most cases)</li>
          <li>But you may not get the best rate without negotiating</li>
        </ul>
        <p><strong>Switching to a new lender:</strong></p>
        <ul>
          <li>Access to potentially better rates and terms</li>
          <li>Many lenders cover the legal and appraisal fees to win your business</li>
          <li>You'll need to qualify again (income verification, credit check, stress test)</li>
          <li>The process takes 2 to 4 weeks, so start early</li>
        </ul>
        <p>The bottom line: switching is worth it if the rate difference is significant enough to justify the effort. Even a 0.25% difference can save thousands over a 5-year term.</p>

        <h2>Fixed vs. Variable at Renewal</h2>
        <p>Renewal is the perfect time to reconsider your rate type. The right choice depends on the current rate environment and your personal comfort level:</p>
        <ul>
          <li><strong>Choose fixed if:</strong> You want predictable payments, rates are low and expected to rise, or you're on a tight budget with no room for payment increases.</li>
          <li><strong>Choose variable if:</strong> You believe rates will stay flat or decline, you have financial flexibility to absorb payment increases, and you want the potential to save money (variable rates are often lower than fixed at the start).</li>
        </ul>
        <p>Use our <a href="/calculators/renewal.html" style="color: #2A7D5B; font-weight: 600;">Renewal Calculator</a> to compare how different rates and terms affect your payments.</p>

        <h2>Can You Make Changes at Renewal?</h2>
        <p>Renewal is your opportunity to adjust your mortgage without penalty. You can:</p>
        <ul>
          <li><strong>Change your term length.</strong> If you chose a 5-year term last time, you could switch to a 3-year term (or vice versa) based on your rate outlook.</li>
          <li><strong>Switch between fixed and variable.</strong> No penalty when you do this at renewal.</li>
          <li><strong>Increase your payments.</strong> If your income has grown, increasing your payment at renewal helps you pay off your mortgage faster.</li>
          <li><strong>Make a lump-sum payment.</strong> Most lenders allow you to put extra money down at renewal, reducing your balance before the new term begins.</li>
        </ul>
        <p>What you generally can't do at a simple renewal is increase your mortgage amount (borrow more) or change your amortization period. Those changes typically require a refinance.</p>

        <h2>The Stress Test at Renewal</h2>
        <p>If you stay with your current lender, you generally don't need to pass the mortgage stress test again. You simply renew at the new rate based on your existing terms.</p>
        <p>If you switch to a new lender, you will need to requalify under the stress test. This means you must demonstrate you can afford payments at the higher of your actual rate plus 2%, or the Bank of Canada's qualifying rate. For most homeowners, this isn't an issue &mdash; but if your financial situation has changed (job loss, increased debts, reduced income), it could affect your ability to switch.</p>

        <h2>What Happens If You Don't Renew?</h2>
        <p>If your term expires and you haven't signed a renewal or arranged to switch lenders, your mortgage doesn't suddenly come due. In most cases, your lender will automatically roll you into an open mortgage at their posted rate &mdash; which is typically much higher than what you'd get by actively renewing.</p>
        <p>An open mortgage does give you the flexibility to pay it off or switch lenders at any time without penalty, but you'll be paying a premium rate every month you stay in it. Don't let this happen by accident.</p>

        <h2>Renewal Mistakes to Avoid</h2>
        <ul>
          <li><strong>Signing the renewal letter without shopping around.</strong> This is the most expensive mistake homeowners make. Always get at least 2 to 3 competing offers.</li>
          <li><strong>Waiting until the last minute.</strong> If you start the process 30 days before renewal, you have almost no leverage. Start at 120 days.</li>
          <li><strong>Ignoring the fine print.</strong> Pay attention to prepayment privileges (can you make extra payments?), portability (can you transfer the mortgage if you move?), and penalty structure.</li>
          <li><strong>Choosing the lowest rate without considering the terms.</strong> A slightly higher rate with better prepayment options or portability can be worth more in the long run.</li>
          <li><strong>Not considering a shorter term.</strong> If you're close to paying off your mortgage, a 1 or 2-year term might make more sense than locking in for 5 years.</li>
        </ul>

        <h2>How a Mortgage Broker Helps at Renewal</h2>
        <p>A mortgage broker does the heavy lifting for you. Instead of calling multiple banks and comparing offers yourself, a broker:</p>
        <ul>
          <li>Submits your application to dozens of lenders simultaneously</li>
          <li>Negotiates rates on your behalf using their volume discounts</li>
          <li>Compares the full picture &mdash; not just rates, but terms, penalties, and flexibility</li>
          <li>Handles the paperwork if you decide to switch lenders</li>
          <li>Doesn't cost you anything &mdash; brokers are paid by the lender, not by you</li>
        </ul>

        <div class="article__cta-box">
          <h3>Renewal coming up? Don't sign that letter yet.</h3>
          <p>Let a licensed mortgage broker compare rates from 30+ lenders and find you the best deal. It takes minutes and could save you thousands.</p>
          <a href="#" class="btn btn--primary btn--large open-modal">Get Pre-Approved</a>
        </div>
      </div>
    </div>
  </article>

  <!-- ======= FOOTER ======= -->
  <footer class="footer">
    <div class="container footer__inner">
      <div class="footer__top">
        <div class="footer__brand">
          <a href="/" class="navbar__logo">
            <svg width="28" height="28" viewBox="0 0 32 32" fill="none">
              <rect width="32" height="32" rx="7" fill="#2A7D5B"/>
              <path d="M7 23V13l9-5.5 9 5.5v10H7z" fill="#1B3C2D"/>
              <rect x="12.5" y="16.5" width="7" height="6.5" rx="1" fill="#F7F3EE"/>
            </svg>
            <span>MyMortgageExpert</span>
          </a>
          <p class="footer__tagline">Helping Canadians find the best mortgage rates since 2019.</p>
        </div>
        <div class="footer__links">
          <div class="footer__col">
            <h4>About Us</h4>
            <a href="/about.html">Our Story</a>
            <a href="/how-it-works.html">How It Works</a>
            <a href="#" class="open-contact-modal">Contact</a>
          </div>
          <div class="footer__col">
            <h4>Resources</h4>
            <a href="/guides/first-time-home-buyer.html">First-Time Buyer Guide</a>
            <a href="/guides/refinancing-your-mortgage.html">Refinancing Guide</a>
            <a href="/guides/mortgage-renewal.html">Mortgage Renewal Guide</a>
          </div>
          <div class="footer__col">
            <h4>Calculators</h4>
            <a href="/calculators/heloc.html">HELOC Calculator</a>
            <a href="/calculators/refinance.html">Refinance</a>
            <a href="/calculators/renewal.html">Renewal</a>
            <a href="/calculators/purchase.html">Purchase Calculator</a>
          </div>
          <div class="footer__col">
            <h4>Legal</h4>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Accessibility</a>
            <a href="#">Disclaimer</a>
          </div>
        </div>
      </div>
      <div class="footer__bottom">
        <p>&copy; 2026 MyMortgageExpert. All rights reserved.</p>
        <div class="footer__legal">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- ======= PRE-APPROVAL MODAL ======= -->
  <div class="modal-overlay" id="preApprovalModal">
    <div class="modal" id="preApprovalModalInner">
      <button class="modal__close" id="modalClose" aria-label="Close">&times;</button>
      <div class="help-progress">
        <div class="help-progress__fill" id="preApprovalProgress" style="width:50%"></div>
      </div>

      <!-- Page 1: Mortgage Details -->
      <div class="help-page active" id="preApprovalPage1">
        <h2 class="modal__title">Get Pre-Approved</h2>
        <p class="modal__subtitle">Tell us about your situation so we can match you with the right broker.</p>
        <form class="modal__form" id="preApprovalForm1">
          <div class="form-group">
            <label for="paGoal">How can we help?</label>
            <select id="paGoal" required>
              <option value="" disabled selected>Select an option</option>
              <option value="HELOC">HELOC</option>
              <option value="Refinance">Refinance</option>
              <option value="Debt Consolidation">Debt Consolidation</option>
              <option value="Power of Sale Help">Power of Sale Help</option>
              <option value="Home Purchase">Home Purchase</option>
              <option value="Lower My Mortgage Rate">Lower My Mortgage Rate</option>
            </select>
          </div>
          <div class="form-group">
            <label for="paPropertyValue">Estimated property value</label>
            <input type="text" id="paPropertyValue" placeholder="$500,000" inputmode="numeric" required>
          </div>
          <div class="form-group">
            <label for="paBalance">Current mortgage balance</label>
            <input type="text" id="paBalance" placeholder="$350,000" inputmode="numeric" required>
          </div>
          <div class="form-group">
            <label for="paRate">Current rate (%)</label>
            <input type="text" id="paRate" placeholder="5.49" inputmode="decimal" required>
          </div>
          <div class="form-group">
            <label>Do you have a 2nd Mortgage or HELOC currently?</label>
            <div class="heloc__toggle" id="paSecondMortgage">
              <button type="button" class="heloc__toggle-btn" data-value="Yes">Yes</button>
              <button type="button" class="heloc__toggle-btn active" data-value="No">No</button>
            </div>
          </div>
          <div class="form-group" id="paSecondMortgageAmountGroup" style="display:none;">
            <label for="paSecondMortgageAmount">2nd Mortgage / HELOC balance</label>
            <input type="text" id="paSecondMortgageAmount" placeholder="$50,000" inputmode="numeric">
          </div>
          <div class="form-group">
            <label>Are you behind on any payments?</label>
            <div class="heloc__toggle" id="paBehind">
              <button type="button" class="heloc__toggle-btn" data-value="Yes">Yes</button>
              <button type="button" class="heloc__toggle-btn active" data-value="No">No</button>
            </div>
          </div>
          <div class="form-group" id="paBehindAmountGroup" style="display:none;">
            <label for="paBehindAmount">How much are you behind?</label>
            <input type="text" id="paBehindAmount" placeholder="$5,000" inputmode="numeric">
          </div>
          <div class="form-group">
            <label for="paBorrow">How much do you want to borrow?</label>
            <input type="text" id="paBorrow" placeholder="$100,000" inputmode="numeric" required>
          </div>
          <button type="submit" class="btn btn--primary btn--large modal__submit">Next</button>
        </form>
      </div>

      <!-- Page 2: Contact Info -->
      <div class="help-page" id="preApprovalPage2">
        <h2 class="modal__title">Almost There!</h2>
        <p class="modal__subtitle">Enter your contact details so we can connect you with a specialist.</p>
        <form class="modal__form" id="preApprovalForm2">
          <div class="modal__row">
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input type="text" id="firstName" placeholder="First Name" required>
            </div>
            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input type="text" id="lastName" placeholder="Last Name" required>
            </div>
          </div>
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" placeholder="(555) 555-5555" required>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" placeholder="you@example.com" required>
          </div>
          <button type="submit" class="btn btn--primary btn--large modal__submit">Find Your Broker</button>
        </form>
        <p class="modal__disclosure">By providing your contact information, you authorize the broker to contact you about your inquiry. MyMortgageExpert does not provide any mortgage services and is not responsible for any services offered by the broker.</p>
      </div>
    </div>
  </div>

  <!-- ======= CONTACT MODAL ======= -->
  <div class="modal-overlay" id="contactModal">
    <div class="modal">
      <button class="modal__close" id="contactModalClose" aria-label="Close">&times;</button>
      <h2 class="modal__title">Contact Us</h2>
      <p class="modal__subtitle">Have a question? Send us a message and we'll get back to you.</p>
      <form class="modal__form" id="contactForm">
        <div class="form-group">
          <label for="contactName">Name</label>
          <input type="text" id="contactName" placeholder="Your Name" required>
        </div>
        <div class="form-group">
          <label for="contactPhone">Phone Number</label>
          <input type="tel" id="contactPhone" placeholder="(555) 555-5555" required>
        </div>
        <div class="form-group">
          <label for="contactEmail">Email</label>
          <input type="email" id="contactEmail" placeholder="you@example.com" required>
        </div>
        <div class="form-group">
          <label for="contactComments">Comments</label>
          <textarea id="contactComments" rows="4" placeholder="How can we help?" required style="width:100%; padding:12px 14px; border:1.5px solid var(--border); border-radius:var(--radius-md); font-family:inherit; font-size:0.92rem; resize:vertical;"></textarea>
        </div>
        <p class="modal__disclosure" style="margin-bottom:16px;">By sending this message you consent to MyMortgageExpert collecting your personal information to respond to your inquiry. We will not share your information with third parties.</p>
        <button type="submit" class="btn btn--primary btn--large modal__submit">Send Message</button>
      </form>
    </div>
  </div>

  <script>
    // Mobile menu
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('navLinks');
    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      navLinks.classList.toggle('active');
    });
    navLinks.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        navLinks.classList.remove('active');
      });
    });

    // Navbar dropdown (mobile)
    document.querySelectorAll('.navbar__dropdown-toggle').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        btn.parentElement.classList.toggle('active');
      });
    });

    // Modal
    const modal = document.getElementById('preApprovalModal');
    const modalClose = document.getElementById('modalClose');
    document.querySelectorAll('.open-modal').forEach(btn => {
      btn.onclick = function(e) {
        e.preventDefault();
        e.stopPropagation();
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        return false;
      };
    });

    modalClose.addEventListener('click', () => {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    });

    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (modal.classList.contains('active')) { modal.classList.remove('active'); document.body.style.overflow = ''; }
        if (contactModal.classList.contains('active')) { contactModal.classList.remove('active'); document.body.style.overflow = ''; }
      }
    });

    // Contact modal
    var contactModal = document.getElementById('contactModal');
    var contactModalClose = document.getElementById('contactModalClose');
    document.querySelectorAll('.open-contact-modal').forEach(function(btn) {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        contactModal.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    });
    contactModalClose.addEventListener('click', function() { contactModal.classList.remove('active'); document.body.style.overflow = ''; });
    contactModal.addEventListener('click', function(e) { if (e.target === contactModal) { contactModal.classList.remove('active'); document.body.style.overflow = ''; } });
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      var cName = document.getElementById('contactName').value;
      var cPhone = document.getElementById('contactPhone').value;
      var cEmail = document.getElementById('contactEmail').value;
      var cComments = document.getElementById('contactComments').value;
      (async function() { var brokerId = await fetchActiveBrokerId(); await submitLead({ first_name: cName, last_name: '', email: cEmail, phone: cPhone, source: 'contact', page: window.location.pathname, broker_id: brokerId, notes: cComments }); })();
      e.target.closest('.modal').innerHTML = '<button class="modal__close" id="contactModalCloseSuccess" aria-label="Close">&times;</button><div style="text-align:center; padding:40px 20px;"><h2 class="modal__title">Message Sent</h2><p class="modal__subtitle">Thanks, ' + cName + '. We\'ll be in touch shortly.</p></div>';
      document.getElementById('contactModalCloseSuccess').addEventListener('click', function() { contactModal.classList.remove('active'); document.body.style.overflow = ''; });
    });

    var broker = {
      name: 'Lighthouse Lending',
      phone: '905-234-3323',
      phoneTel: '19052343323',
      licence: 'FSRA# 13301',
      logo: '../lighthouse-lending-logo.png'
    };

    // Pre-approval wizard: Page 1 → Page 2
    document.getElementById('preApprovalForm1').addEventListener('submit', function(e) {
      e.preventDefault();
      document.getElementById('preApprovalPage1').classList.remove('active');
      document.getElementById('preApprovalPage2').classList.add('active');
      document.getElementById('preApprovalProgress').style.width = '100%';
    });

    // Yes/No toggles with conditional amount fields
    var toggleAmountMap = {
      paSecondMortgage: { group: 'paSecondMortgageAmountGroup', input: 'paSecondMortgageAmount' },
      paBehind: { group: 'paBehindAmountGroup', input: 'paBehindAmount' }
    };
    ['paSecondMortgage', 'paBehind'].forEach(function(id) {
      document.getElementById(id).addEventListener('click', function(e) {
        var btn = e.target.closest('.heloc__toggle-btn');
        if (!btn) return;
        this.querySelectorAll('.heloc__toggle-btn').forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');
        var map = toggleAmountMap[id];
        if (btn.dataset.value === 'Yes') {
          document.getElementById(map.group).style.display = '';
        } else {
          document.getElementById(map.group).style.display = 'none';
          document.getElementById(map.input).value = '';
        }
      });
    });

    // Currency formatting on page 1 inputs
    ['paPropertyValue', 'paBalance', 'paBorrow', 'paSecondMortgageAmount', 'paBehindAmount'].forEach(function(id) {
      document.getElementById(id).addEventListener('input', function() {
        var raw = this.value.replace(/[^0-9]/g, '');
        if (raw === '') { this.value = ''; return; }
        this.value = '$' + Number(raw).toLocaleString('en-CA');
      });
    });

    // Pre-approval wizard: Page 2 submit
    document.getElementById('preApprovalForm2').addEventListener('submit', function(e) {
      e.preventDefault();
      var firstName = document.getElementById('firstName').value;
      var lastName = document.getElementById('lastName').value;
      var phone = document.getElementById('phone').value;
      var email = document.getElementById('email').value;

      // Gather page 1 data
      var goal = document.getElementById('paGoal').value;
      var propertyValue = document.getElementById('paPropertyValue').value;
      var balance = document.getElementById('paBalance').value;
      var rate = document.getElementById('paRate').value;
      var secondMortgage = document.querySelector('#paSecondMortgage .heloc__toggle-btn.active').dataset.value;
      var secondMortgageAmt = document.getElementById('paSecondMortgageAmount').value || 'N/A';
      var behind = document.querySelector('#paBehind .heloc__toggle-btn.active').dataset.value;
      var behindAmt = document.getElementById('paBehindAmount').value || 'N/A';
      var borrow = document.getElementById('paBorrow').value;

      (async function() {
        var brokerId = await fetchActiveBrokerId();
        await submitLead({
          first_name: firstName, last_name: lastName, email: email, phone: phone,
          source: 'pre-approval', page: window.location.pathname,
          broker_id: brokerId,
          notes: 'Goal: ' + goal + ' | Property Value: ' + propertyValue + ' | Balance: ' + balance + ' | Rate: ' + rate + '% | 2nd Mortgage/HELOC: ' + secondMortgage + (secondMortgage === 'Yes' ? ' (' + secondMortgageAmt + ')' : '') + ' | Behind on Payments: ' + behind + (behind === 'Yes' ? ' (' + behindAmt + ')' : '') + ' | Want to Borrow: ' + borrow
        });
      })();

      var modalEl = document.getElementById('preApprovalModalInner');
      modalEl.innerHTML = '<button class="modal__close" id="modalCloseLoading" aria-label="Close">&times;</button>' +
        '<div class="help-loading">' +
          '<div class="help-loading__spinner"></div>' +
          '<h2 class="help-loading__text">Pairing you with the best Broker</h2>' +
        '</div>';
      document.getElementById('modalCloseLoading').addEventListener('click', function() {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      });
      setTimeout(function() {
        modalEl.innerHTML = '<button class="modal__close" id="modalCloseResult" aria-label="Close">&times;</button>' +
          '<div class="broker-result">' +
            '<h2 class="broker-result__heading">You\'ve Been Matched!</h2>' +
            '<p class="broker-result__subtext">' + firstName + ', here is your matched broker:</p>' +
            '<img class="broker-result__logo" src="' + broker.logo + '" alt="' + broker.name + '">' +
            '<h3 class="broker-result__name">' + broker.name + '</h3>' +
            '<div class="broker-result__info">' +
              '<span>' + broker.phone + '</span>' +
              '<span>' + broker.licence + '</span>' +
            '</div>' +
            '<a href="tel:' + broker.phoneTel + '" class="btn btn--primary btn--large broker-result__cta">Call Now</a>' +
          '</div>';
        document.getElementById('modalCloseResult').addEventListener('click', function() {
          modal.classList.remove('active');
          document.body.style.overflow = '';
        });
      }, 3000);
    });

    // Navbar scroll shadow
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
      navbar.style.boxShadow = window.scrollY > 10 ? '0 2px 16px rgba(0,0,0,0.06)' : 'none';
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../supabase-config.js"></script>
  <script>
    (async function() {
      const b = await fetchBroker();
      if (b) { broker.name = b.name; broker.phone = b.phone; broker.phoneTel = b.phoneTel; broker.licence = b.licence; broker.logo = '../' + b.logo; }
    })();
  </script>
</body>
</html>
